<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Print-Square API reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <!---

        INTRODUCTION

-->

<h1 id="introduction">Introduction</h1>

<p>Welcome to the Print-Square API reference</p>

<!---

        USER SIGNUP

-->

<h1 id="user-signup">User Signup</h1>

<h2 id="signup-with-facebook">Signup with Facebook</h2>

<blockquote>
<p>Make a <code class="prettyprint">POST</code> request to <code class="prettyprint">/api/v1/user/new</code> :</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST --data <span class="s2">"provider=fb&amp;token=facebook_token"</span> <span class="s2">"http://someserver.com/api/v1/user/new"</span>

</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">facebook_token</code> with the actual token value</p>

<p>The above command (if successful) returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38945b04ab19ae4088b06858468bb4fe"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T06:51:57.367Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avastpulkit@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pulkit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ShaRma"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"password_hash"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T06:51:57.367Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successful"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If the above command is unsuccessful:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Invalid Token"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><code class="prettyprint">POST /api/v1/user/new</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>set to <code class="prettyprint">fb</code> for facebook login/signup</td>
</tr>
<tr>
<td>token</td>
<td><code class="prettyprint">access_token</code> provided by facebook</td>
</tr>
</tbody></table>

<h2 id="signup-with-email-or-mobile">Signup with Email or Mobile</h2>

<blockquote>
<p>Make a <code class="prettyprint">POST</code> request to <code class="prettyprint">/api/v1/user/new</code> :</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST --data <span class="s2">"provider=email&amp;email=USER_EMAIL&amp;password=USER_PASSWORD&amp;first_name=FIRST_NAME&amp;last_name=LAST_NAME"</span> <span class="s2">"http://localhost:3000/api/v1/user/new"</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">USER_EMAIL</code> , <code class="prettyprint">USER_PASSWORD</code> ,<code class="prettyprint">FIRST_NAME</code> , <code class="prettyprint">LAST_NAME</code> with actual values</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e29d562691b4f20713d6465bfab09e9"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T07:15:40.682Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avastpulkit@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pulkit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sharma"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"password_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$2a$10$rBYpytFcKskPAzyEYnbRkeeiWBJ6ttqU.TVBe6VbhW.mFWa.O35ju"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T07:15:40.682Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successful"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If the command fails, the following object is returned:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Email has already been taken"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><code class="prettyprint">POST /api/v1/user/new</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>set to <code class="prettyprint">email</code> or <code class="prettyprint">mobile</code> accordingly</td>
</tr>
<tr>
<td>email</td>
<td>the <code class="prettyprint">email address</code> of the user , if present</td>
</tr>
<tr>
<td>mobile</td>
<td>the <code class="prettyprint">mobile number</code> of the user , if present</td>
</tr>
<tr>
<td>password</td>
<td>the <code class="prettyprint">password</code></td>
</tr>
<tr>
<td>first_name</td>
<td><code class="prettyprint">first name</code> of the user</td>
</tr>
<tr>
<td>last_name</td>
<td><code class="prettyprint">last name</code> of the user</td>
</tr>
</tbody></table>

<aside class="warning">If the email/mobile is already registered (Even if by a facebook account) , then the above query will fail&quot;</aside>

<!---

        USER LOGIN
-->

<h1 id="user-login">User Login</h1>

<h2 id="login-signup-with-facebook">Login/Signup with Facebook</h2>

<blockquote>
<p>Make a <code class="prettyprint">POST</code> request to <code class="prettyprint">/api/v1/user/login</code> :</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST --data <span class="s2">"provider=fb&amp;token=facebook_token"</span> <span class="s2">"http://someserver.com/api/v1/user/login"</span>

</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">facebook_token</code> with the actual token value</p>

<p>The above command (if successful) returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b19b866f2ec776f14da8f24f7a13c286"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T07:45:10.567Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avastpulkit@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pulkit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ShaRma"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"password_hash"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T07:45:10.567Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successful"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If the above command is unsuccessful:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Invalid Token"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><code class="prettyprint">POST /api/v1/user/login</code></p>

<aside class="notice">Login also creates a new `fb` user in the database (if one doesn&rsquo;t exist).<bold>So essentially, you can use login to signup as well as login a Facebook user</bold></aside>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>set to <code class="prettyprint">fb</code> for facebook login/signup</td>
</tr>
<tr>
<td>token</td>
<td><code class="prettyprint">access_token</code> provided by facebook</td>
</tr>
</tbody></table>

<h2 id="login-with-email-or-mobile">Login with Email or Mobile</h2>

<blockquote>
<p>Make a <code class="prettyprint">POST</code> request to <code class="prettyprint">/api/v1/user/login</code> :</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST --data <span class="s2">"provider=email_mobile&amp;email_mobile=USER_EMAIL_OR_MOBILE&amp;password=USER_PASSWORD"</span> 
<span class="s2">"http://localhost:3000/api/v1/user/login"</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">USER_EMAIL_OR_MOBILE</code> , <code class="prettyprint">USER_PASSWORD</code> with actual values</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e29d562691b4f20713d6465bfab09e9"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T07:15:40.682Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avastpulkit@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pulkit"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sharma"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"password_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$2a$10$rBYpytFcKskPAzyEYnbRkeeiWBJ6ttqU.TVBe6VbhW.mFWa.O35ju"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19T07:15:40.682Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successful"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>If the command fails, the following object is returned:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid credentials"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p><code class="prettyprint">POST /api/v1/user/login</code></p>

<aside class="notice">Users registered with email or mobile can be logged in using this endpoint. Provider = email_mobile</aside>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>set to <code class="prettyprint">email_mobile</code></td>
</tr>
<tr>
<td>email_mobile</td>
<td><code class="prettyprint">email</code> or <code class="prettyprint">mobile</code> of the user to login</td>
</tr>
<tr>
<td>password</td>
<td>the <code class="prettyprint">password</code></td>
</tr>
</tbody></table>

<!---

        AUTHENTICATION

-->

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>Example Authorization:</p>
</blockquote>
<pre class="highlight shell"><code>curl --data <span class="s2">"api_key=THE_API_KEY"</span> <span class="s2">"api_endpoint_here"</span>  
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">THE_API_KEY</code> with the API key.</p>
</blockquote>

<p>Authentication is only required after a <em>User</em> is successfully logged in.</p>

<p>When a <em>User</em> is logged in , you will be provided with an hexadecimal <code class="prettyprint">api_key</code>.
Once you have the <code class="prettyprint">api_key</code> , you will need to send that <code class="prettyprint">api_key</code> for each request concerned with that <em>User</em> to authorize.</p>

<aside class="notice">
You must replace <code>THE_API_KEY</code> with the API key.
</aside>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
